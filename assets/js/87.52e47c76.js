(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{451:function(e,t,_){"use strict";_.r(t);var v=_(11),o=Object(v.a)({},(function(){var e=this,t=e.$createElement,_=e._self._c||t;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("p",[e._v("经过一些努力，把博客迁移到了 Github Pages，将域名改成了自定义，并且成功启用了 SSL，以下是步骤（就不截图了）。")]),e._v(" "),_("h2",{attrs:{id:"部署代码"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#部署代码"}},[e._v("#")]),e._v(" 部署代码")]),e._v(" "),_("p",[e._v("Github Pages 支持两种级别的部署：")]),e._v(" "),_("ol",[_("li",[_("strong",[e._v("user / organization")]),e._v(" 方式\n"),_("ul",[_("li",[e._v("repo 名字必须为 "),_("code",[e._v("<user-name or org-name>.github.io")])]),e._v(" "),_("li",[e._v("pages build branch 固定为 "),_("code",[e._v("master")])]),e._v(" "),_("li",[e._v("部署后的发布域名即为 repo 名")])])]),e._v(" "),_("li",[_("strong",[e._v("project")]),e._v(" 方式\n"),_("ul",[_("li",[e._v("repo 名字没有限制")]),e._v(" "),_("li",[e._v("pages build branch 可以任意指定")]),e._v(" "),_("li",[e._v("发布域名为 "),_("code",[e._v("<user-name or org-name>.github.io/<project-name>")])])])])]),e._v(" "),_("p",[e._v("因此，如果要做个人页面则必然选择第一种方式。")]),e._v(" "),_("p",[e._v("因为 build branch 限制为 master，因此我一开始选择了重建 repo，实际上没有必要，可以直接 rename 旧的 repo")]),e._v(" "),_("p",[e._v("rename 后，到 repo settings -> options -> Github Pages，即可发现自动部署已经开始了。即刻访问 "),_("code",[e._v("<user-name or org-name>.github.io")]),e._v(" 可以看到部署结果。")]),e._v(" "),_("h2",{attrs:{id:"自定义域名"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#自定义域名"}},[e._v("#")]),e._v(" 自定义域名")]),e._v(" "),_("ol",[_("li",[e._v("在 repo settings -> options -> Github Pages -> Custom Domain 中，填入自己的域名，如 "),_("code",[e._v("wxsm.space")]),e._v("，保存")]),e._v(" "),_("li",[e._v("在自己的域名供应商处修改域名解析，添加两条 A 记录（此处可以参考最新"),_("a",{attrs:{href:"https://help.github.com/articles/setting-up-an-apex-domain/",target:"_blank",rel:"noopener noreferrer"}},[e._v("文档"),_("OutboundLink")],1),e._v("）：\n"),_("ul",[_("li",[_("code",[e._v("192.30.252.153")])]),e._v(" "),_("li",[_("code",[e._v("192.30.252.154")])])])]),e._v(" "),_("li",[e._v("等待记录生效")])]),e._v(" "),_("p",[e._v("过一会就可以发现，使用自定义域名可以访问网站了，并且原 "),_("code",[e._v("<user-name or org-name>.github.io")]),e._v(" 会重定向到自定义域名。")]),e._v(" "),_("h2",{attrs:{id:"启用-ssl"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#启用-ssl"}},[e._v("#")]),e._v(" 启用 SSL")]),e._v(" "),_("p",[e._v("这里是最麻烦的。虽然 Github Pages 原生支持 SSL，但是只针对 "),_("code",[e._v("*.github.io")]),e._v(" 域名，对于自定义域名，无法直接启用。因此需要找一个支持 SSL 的 CDN 供应商。考虑到免费这个关键因素，选择了 CloudFlare（以下简称 CF）")]),e._v(" "),_("ol",[_("li",[e._v("前往 CF 官网，注册账号，填入自己的域名，点几个 Continue")]),e._v(" "),_("li",[e._v("到注册的最后一步时，需要将域名的 DNS 服务器切换为 CF 服务器（CF 会提供两个，两个都要填上），到原域名供应商处修改域名 DNS 服务器即可，24 小时内生效")]),e._v(" "),_("li",[e._v("生效后可以打开网站查看是否正常。控制台页面上方有一个 Crypto Tab，点开，SSL 选择 "),_("code",[e._v("Flexible")]),e._v(" 或者 "),_("code",[e._v("Full")]),e._v("，同样需要等待一段时间生效")]),e._v(" "),_("li",[e._v("生效后即可以通过 "),_("code",[e._v("https")]),e._v(" 访问网站了，如果需要强制 SSL，可以到 Page Rules Tab，添加一些记录，为某些域名段设置强制 SSL "),_("code",[e._v("Aways use https")])])])])}),[],!1,null,null,null);t.default=o.exports}}]);